---
layout: post
title: Georeferencing paper hiking maps to make a map-map
categories: [post]

custom_css: leaflet
custom_js: 
- leaflet
- leaflet-georaster


---

Throughout many years of hiking the alps, my mother has amassed a fairly large collection of hiking maps. 
Recently, I found myself wanting to somehow make this drawer-filling mountain of paper more easily searchable. 
As a first step, I georeferenced them to create a map-map which you can see below. 
As a second step, I put them all back into the cupboard.

Below is an illustration of all the area that is covered by 40 of these hiking maps. <!--more-->
 As you can see, the nothern Alps are covered very well with a considerable amount of duplication - two spots in Bavaria's Karwendel mountain range are even covered by five different maps! Other outlying maps seem to be remnants from holiday trips to Italy or France. I especially like the only map of Croatia which has quite an innovative shape to not waste paper on mapping the sea. 

{% raw %}
<div id="map-container" style=" width: 100%;">
<div id="map" class="map leaflet-container" style=" width: 100%; height: 300px;"></div>
 </div> 
{% endraw %}

You can click on a spot on the web map to show which paper maps cover it and display their georeferenced cover image. Below is a gallery of the covers of all the paper maps that make up the heatmap above. You can also click on the image of a paper map to enlarge it or  to zoom to the area it covers. 

{% raw %}
<div id="all-maps-wrapper" class="wrapper" style="  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 2px;
  grid-auto-rows: auto;
  grid-auto-flow: row;
  position:relative;">
</div> 
{% endraw %}



## How I made this

I took a photograph of a map's cover page and cropped the photograph to the tiny map which on basically all maps indicate their extent (the map on the map). I then georeferenced these tiny maps using QGIS. This requires manually selecting a pixel on the image and finding the corresponding point in a georeferenced layer (such as OSM) in QGIS, repeated a couple of times for each map. Even though [QGIS's georeferencer](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/georeferencer.html) has a nice UI, it is still tedious manual labour. Please let me know if you have some more efficient way of doing this (some fancy pipeline perhaps, that extracts pieces of texts from the map image, geocodes these texts to find the rough area of correspondence, and then uses some geometric feature matching to establish the exact projection?).  

It took me quite a while to figure out how to visualize the area covered by the maps somewhat intuitively. I finally settled on the heatmap above that consists of individual polygons, instead of rasterized pixels. I built the polygon heatmap using the wonderful [Shapely](https://shapely.readthedocs.io/en/stable/manual.html), essentially by intersecting all the polygons with each other. If you are interested, you can find the code [here](https://github.com/jbraese/geospatial-playground/blob/main/scripts/mapmap/make_polygon_heatmap.py). I also used Python for various data processing jobs such as converting between different data formats and file sizes (scripts are [here](https://github.com/jbraese/geospatial-playground/blob/main/scripts/mapmap/)). 

I finally display the maps here using [Leaflet](https://leafletjs.com/), the plugin [georaster-layer-for-leaflet](https://github.com/GeoTIFF/georaster-layer-for-leaflet), and a bunch of very hacky Javascript (don't judge).

{% raw %} 
<script>

const polyHeatMapJSON = {
"type": "FeatureCollection",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 0, 17, 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.784936297868962, 47.757500524283891 ], [ 11.785266280979853, 47.58229563153715 ], [ 11.74519894198626, 47.582697691366079 ], [ 11.756928171954028, 47.758830530410947 ], [ 11.784936297868962, 47.757500524283891 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 0, 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.785266280979853, 47.58229563153715 ], [ 11.784936297868962, 47.757500524283891 ], [ 11.875800865709241, 47.753185689641725 ], [ 11.867186710731241, 47.581473592569779 ], [ 11.785266280979853, 47.58229563153715 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 0, 10, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.997578058312023, 47.682453655414939 ], [ 12.114202059897915, 47.682535613208685 ], [ 12.100008148511273, 47.5791373219365 ], [ 12.001936312142181, 47.580121433852675 ], [ 11.997578058312023, 47.682453655414939 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 0, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.867186710731241, 47.581473592569779 ], [ 11.875800865709241, 47.753185689641725 ], [ 12.122293685450035, 47.741480623707417 ], [ 12.114202059897915, 47.682535613208685 ], [ 11.997578058312023, 47.682453655414939 ], [ 12.001936312142181, 47.580121433852675 ], [ 11.867186710731241, 47.581473592569779 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 30 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.262791737635341, 47.163241238966592 ], [ 11.669764457106806, 47.185646864031874 ], [ 11.706845211074398, 46.943040723851539 ], [ 11.226168770753768, 46.95679083755271 ], [ 11.262791737635341, 47.163241238966592 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 29, 27, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.300211187118132, 46.462146404123658 ], [ 12.301329950271484, 46.442770637117242 ], [ 12.045518888436161, 46.446371992818982 ], [ 12.044107477302981, 46.494328857167005 ], [ 12.284176505574196, 46.497027073486976 ], [ 12.28221675840464, 46.461939818484325 ], [ 12.300211187118132, 46.462146404123658 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 29, 27 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.300211187118132, 46.462146404123658 ], [ 12.321956393383804, 46.462396050689847 ], [ 12.32329442277984, 46.442461417188532 ], [ 12.301329950271484, 46.442770637117242 ], [ 12.300211187118132, 46.462146404123658 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 29, 24, 23, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.068137947976364, 46.596883583896719 ], [ 11.953036452425113, 46.596700081653218 ], [ 11.954830623488659, 46.62975365730874 ], [ 12.005505132015882, 46.631817947440162 ], [ 12.007652356953479, 46.659530787645529 ], [ 12.086400611661821, 46.663009811406333 ], [ 12.068137947976364, 46.596883583896719 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 29, 24, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.068137947976364, 46.596883583896719 ], [ 12.026643224309037, 46.446637727928874 ], [ 11.944953388775726, 46.447787772625382 ], [ 11.953036452425113, 46.596700081653218 ], [ 12.068137947976364, 46.596883583896719 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 29, 23, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.230394719176461, 46.669371335522833 ], [ 12.232638532321046, 46.612317224141933 ], [ 12.18552738777295, 46.611247391436429 ], [ 12.185138039470901, 46.597070113004577 ], [ 12.068137947976364, 46.596883583896719 ], [ 12.086400611661821, 46.663009811406333 ], [ 12.230394719176461, 46.669371335522833 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 29, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.321699625631997, 46.466221505528445 ], [ 12.299982584743654, 46.466105549838936 ], [ 12.300211187118132, 46.462146404123658 ], [ 12.28221675840464, 46.461939818484325 ], [ 12.284176505574196, 46.497027073486976 ], [ 12.044107477302981, 46.494328857167005 ], [ 12.045518888436161, 46.446371992818982 ], [ 12.026643224309037, 46.446637727928874 ], [ 12.068137947976364, 46.596883583896719 ], [ 12.185138039470901, 46.597070113004577 ], [ 12.18552738777295, 46.611247391436429 ], [ 12.232638532321046, 46.612317224141933 ], [ 12.230394719176461, 46.669371335522833 ], [ 12.307834403229162, 46.672792547863942 ], [ 12.321699625631997, 46.466221505528445 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 29 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.321699625631997, 46.466221505528445 ], [ 12.321956393383804, 46.462396050689847 ], [ 12.300211187118132, 46.462146404123658 ], [ 12.299982584743654, 46.466105549838936 ], [ 12.321699625631997, 46.466221505528445 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 27, 24, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.010155112569901, 46.386936873396117 ], [ 12.005054904662618, 46.387008305755977 ], [ 12.00344272353459, 46.444050109853642 ], [ 12.025978446856344, 46.444230673523386 ], [ 12.010155112569901, 46.386936873396117 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 27, 24 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.010155112569901, 46.386936873396117 ], [ 12.005530218638405, 46.370190861226739 ], [ 12.005054904662618, 46.387008305755977 ], [ 12.010155112569901, 46.386936873396117 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 27, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.045518888436161, 46.446371992818982 ], [ 12.301329950271484, 46.442770637117242 ], [ 12.30479208246234, 46.382810254551401 ], [ 12.010155112569901, 46.386936873396117 ], [ 12.025978446856344, 46.444230673523386 ], [ 12.04557728768015, 46.444387705919077 ], [ 12.045518888436161, 46.446371992818982 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 27 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.301329950271484, 46.442770637117242 ], [ 12.32329442277984, 46.442461417188532 ], [ 12.321956393383804, 46.462396050689847 ], [ 12.34100917349147, 46.462614786767681 ], [ 12.335129931982783, 46.248908283207783 ], [ 12.303773977269808, 46.249247086593265 ], [ 12.302794103685031, 46.231287623345658 ], [ 12.009321965043275, 46.236032203831314 ], [ 12.005530218638405, 46.370190861226739 ], [ 12.025978446856344, 46.444230673523386 ], [ 12.010155112569901, 46.386936873396117 ], [ 12.30479208246234, 46.382810254551401 ], [ 12.301329950271484, 46.442770637117242 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 26, 24, 23, 22 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.791242634481677, 46.53194821705879 ], [ 11.795436067213156, 46.454488244765471 ], [ 11.722637252532866, 46.452118744695277 ], [ 11.725697976331393, 46.390920915790197 ], [ 11.712622675848932, 46.391104045495176 ], [ 11.719212490986306, 46.524207272998567 ], [ 11.791242634481677, 46.53194821705879 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 26, 24, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.952227054943108, 46.387748200685856 ], [ 11.725697976331393, 46.390920915790197 ], [ 11.722637252532866, 46.452118744695277 ], [ 11.795436067213156, 46.454488244765471 ], [ 11.791242634481677, 46.53194821705879 ], [ 11.906940996572668, 46.544382102448218 ], [ 11.952227054943108, 46.387748200685856 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 26, 24, 22 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.719212490986306, 46.524207272998567 ], [ 11.712622675848932, 46.391104045495176 ], [ 11.725697976331393, 46.390920915790197 ], [ 11.726649785625479, 46.371889906733529 ], [ 11.604680758568259, 46.369824016853649 ], [ 11.570225715058983, 46.371361620397082 ], [ 11.631914010908815, 46.514825469519785 ], [ 11.719212490986306, 46.524207272998567 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 26, 24 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.712622675848932, 46.391104045495176 ], [ 11.952227054943108, 46.387748200685856 ], [ 11.962019832152878, 46.35387727089752 ], [ 11.604680758568259, 46.369824016853649 ], [ 11.726649785625479, 46.371889906733529 ], [ 11.725697976331393, 46.390920915790197 ], [ 11.712622675848932, 46.391104045495176 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 25 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.462860947257239, 45.904040070930819 ], [ 10.907326089136728, 45.920411645977147 ], [ 10.911683590527703, 45.513337575989624 ], [ 10.911683590527703, 45.512116166928081 ], [ 10.80013155491873, 45.519444223681653 ], [ 10.798388554362342, 45.438171603612062 ], [ 10.498592458663239, 45.452846007817968 ], [ 10.462860947257239, 45.904040070930819 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 24, 23, 22 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.756813754174422, 46.590659521457411 ], [ 11.787984220041158, 46.592136780568595 ], [ 11.791242634481677, 46.53194821705879 ], [ 11.719212490986306, 46.524207272998567 ], [ 11.721640484071472, 46.573248666308437 ], [ 11.755908155317121, 46.574488468517103 ], [ 11.756813754174422, 46.590659521457411 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 24, 23, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.086400611661821, 46.663009811406333 ], [ 12.007652356953479, 46.659530787645529 ], [ 12.005505132015882, 46.631817947440162 ], [ 11.954830623488659, 46.62975365730874 ], [ 11.953036452425113, 46.596700081653218 ], [ 11.849519803103458, 46.596535048720341 ], [ 11.863146993675223, 46.655627689786634 ], [ 11.819150635543526, 46.656429408568627 ], [ 11.823327463462949, 46.671507553910089 ], [ 11.886942792447075, 46.673761708408023 ], [ 12.090558988297085, 46.678066637956398 ], [ 12.086400611661821, 46.663009811406333 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 24, 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.954830623488659, 46.62975365730874 ], [ 11.944953388775726, 46.447787772625382 ], [ 12.026643224309037, 46.446637727928874 ], [ 12.025978446856344, 46.444230673523386 ], [ 12.00344272353459, 46.444050109853642 ], [ 12.005054904662618, 46.387008305755977 ], [ 11.952227054943108, 46.387748200685856 ], [ 11.906940996572668, 46.544382102448218 ], [ 11.719212490986306, 46.524207272998567 ], [ 11.791242634481677, 46.53194821705879 ], [ 11.787984220041158, 46.592136780568595 ], [ 11.756813754174422, 46.590659521457411 ], [ 11.761218096385006, 46.669306761877749 ], [ 11.823327463462949, 46.671507553910089 ], [ 11.819150635543526, 46.656429408568627 ], [ 11.863146993675223, 46.655627689786634 ], [ 11.849519803103458, 46.596535048720341 ], [ 11.953036452425113, 46.596700081653218 ], [ 11.954830623488659, 46.62975365730874 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 24, 22 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.751201427471264, 46.668951829825261 ], [ 11.754737517273783, 46.590561122546994 ], [ 11.756813754174422, 46.590659521457411 ], [ 11.755908155317121, 46.574488468517103 ], [ 11.721640484071472, 46.573248666308437 ], [ 11.719212490986306, 46.524207272998567 ], [ 11.631914010908815, 46.514825469519785 ], [ 11.570225715058983, 46.371361620397082 ], [ 11.604680758568259, 46.369824016853649 ], [ 11.536390018621436, 46.368667320338567 ], [ 11.48597509585578, 46.65955376275668 ], [ 11.751201427471264, 46.668951829825261 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 24 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.751201427471264, 46.668951829825261 ], [ 11.761218096385006, 46.669306761877749 ], [ 11.755908155317121, 46.574488468517103 ], [ 11.756813754174422, 46.590659521457411 ], [ 11.754737517273783, 46.590561122546994 ], [ 11.751201427471264, 46.668951829825261 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 24 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.570225715058983, 46.371361620397082 ], [ 11.962019832152878, 46.35387727089752 ], [ 11.952227054943108, 46.387748200685856 ], [ 12.005054904662618, 46.387008305755977 ], [ 12.00344272353459, 46.444050109853642 ], [ 12.005530218638405, 46.370190861226739 ], [ 11.996984228466332, 46.339247177427559 ], [ 11.537677196331671, 46.361240500572698 ], [ 11.536390018621436, 46.368667320338567 ], [ 11.604680758568259, 46.369824016853649 ], [ 11.570225715058983, 46.371361620397082 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 24, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.090558988297085, 46.678066637956398 ], [ 11.886942792447075, 46.673761708408023 ], [ 12.091370621195578, 46.681005432790741 ], [ 12.090558988297085, 46.678066637956398 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 23, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.886942792447075, 46.673761708408023 ], [ 11.823327463462949, 46.671507553910089 ], [ 11.823580799739357, 46.672422085528254 ], [ 11.886942792447075, 46.673761708408023 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.76131884025064, 46.671105719961048 ], [ 11.823580799739357, 46.672422085528254 ], [ 11.823327463462949, 46.671507553910089 ], [ 11.886942792447075, 46.673761708408023 ], [ 11.761218096385006, 46.669306761877749 ], [ 11.76131884025064, 46.671105719961048 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 23, 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.229936861632682, 46.681013416933425 ], [ 12.230394719176461, 46.669371335522833 ], [ 12.086400611661821, 46.663009811406333 ], [ 12.090558988297085, 46.678066637956398 ], [ 12.229936861632682, 46.681013416933425 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.229936861632682, 46.681013416933425 ], [ 12.366113178375608, 46.683892507406995 ], [ 12.377535735457492, 46.466519636136908 ], [ 12.321699625631997, 46.466221505528445 ], [ 12.307834403229162, 46.672792547863942 ], [ 12.230394719176461, 46.669371335522833 ], [ 12.229936861632682, 46.681013416933425 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 23 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.026643224309037, 46.446637727928874 ], [ 12.045518888436161, 46.446371992818982 ], [ 12.04557728768015, 46.444387705919077 ], [ 12.025978446856344, 46.444230673523386 ], [ 12.026643224309037, 46.446637727928874 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 22 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.189543570228354, 46.650797409474343 ], [ 11.75072498418117, 46.679513984231477 ], [ 11.751201427471264, 46.668951829825261 ], [ 11.48597509585578, 46.65955376275668 ], [ 11.536390018621436, 46.368667320338567 ], [ 11.189543570228354, 46.362792496336972 ], [ 11.189543570228354, 46.650797409474343 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 21 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.859304527335828, 49.948938013346925 ], [ 11.544089373975668, 49.948040574147875 ], [ 11.618007086545752, 49.613935962632034 ], [ 10.869764581001403, 49.629747403411308 ], [ 10.859304527335828, 49.948938013346925 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 20, 2 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.346012225599116, 48.842138668231605 ], [ 11.342468540711565, 49.055754110616924 ], [ 11.369656760591264, 49.055314420803768 ], [ 11.346012225599116, 48.842138668231605 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 20 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.346012225599116, 48.842138668231605 ], [ 11.341057967940435, 48.797471788329908 ], [ 10.797680907574669, 48.811075651351082 ], [ 10.790266405776304, 49.064684362564641 ], [ 11.342468540711565, 49.055754110616924 ], [ 11.346012225599116, 48.842138668231605 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 28 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.860032207258817, 46.804009891174594 ], [ 12.17618302852374, 46.793348539385306 ], [ 12.175793680221691, 46.762685385651388 ], [ 12.226798307790293, 46.760818369021734 ], [ 12.229936861632682, 46.681013416933425 ], [ 12.090558988297085, 46.678066637956398 ], [ 12.091370621195578, 46.681005432790741 ], [ 11.886942792447075, 46.673761708408023 ], [ 11.823580799739357, 46.672422085528254 ], [ 11.860032207258817, 46.804009891174594 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 19, 7 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.049931371541733, 47.742331018036509 ], [ 13.048036235363067, 47.72985772447192 ], [ 12.850891690853322, 47.741190905138033 ], [ 13.049931371541733, 47.742331018036509 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 19 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.776185935941449, 47.740762985466588 ], [ 12.850891690853322, 47.741190905138033 ], [ 13.048036235363067, 47.72985772447192 ], [ 13.049931371541733, 47.742331018036509 ], [ 13.07102131177785, 47.742451822656008 ], [ 13.08458273451649, 47.494622786270263 ], [ 12.781710960020154, 47.492925925016827 ], [ 12.776185935941449, 47.740762985466588 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 18, 13 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 9.984837592862588, 47.20361963267657 ], [ 9.989461292136648, 47.621151441464562 ], [ 10.065353275768977, 47.620491414895859 ], [ 10.126447138283325, 47.201818996743071 ], [ 9.984837592862588, 47.20361963267657 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 18 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 9.58588245603611, 47.624661334626438 ], [ 9.989461292136648, 47.621151441464562 ], [ 9.984837592862588, 47.20361963267657 ], [ 9.547988794476577, 47.209174382828074 ], [ 9.58588245603611, 47.624661334626438 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 16, 9, 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.784922607781334, 47.764769291246047 ], [ 11.655765735736832, 47.765972893053373 ], [ 11.658934606236544, 47.786155058448514 ], [ 11.784892972684556, 47.780504078212374 ], [ 11.784922607781334, 47.764769291246047 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 5, "map_ids": [ 17, 16, 9, 5, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.643052183758527, 47.559207425304059 ], [ 11.640738414506332, 47.553694820516576 ], [ 11.603195517627229, 47.554329592119565 ], [ 11.603780974772198, 47.561077344255366 ], [ 11.643052183758527, 47.559207425304059 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 16, 9, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.643052183758527, 47.559207425304059 ], [ 11.785322524356458, 47.552433149366038 ], [ 11.785324752396726, 47.551250168955235 ], [ 11.640738414506332, 47.553694820516576 ], [ 11.643052183758527, 47.559207425304059 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 16, 9, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.555932725999105, 47.708511896781012 ], [ 11.711152893888517, 47.721458825411148 ], [ 11.643052183758527, 47.559207425304059 ], [ 11.603780974772198, 47.561077344255366 ], [ 11.603195517627229, 47.554329592119565 ], [ 11.548084865060499, 47.555261397605541 ], [ 11.555932725999105, 47.708511896781012 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.555932725999105, 47.708511896781012 ], [ 11.560135768543525, 47.790587557018483 ], [ 11.658934606236544, 47.786155058448514 ], [ 11.655765735736832, 47.765972893053373 ], [ 11.784922607781334, 47.764769291246047 ], [ 11.784936297868962, 47.757500524283891 ], [ 11.756928171954028, 47.758830530410947 ], [ 11.74519894198626, 47.582697691366079 ], [ 11.785266280979853, 47.58229563153715 ], [ 11.785322524356458, 47.552433149366038 ], [ 11.603780974772198, 47.561077344255366 ], [ 11.643052183758527, 47.559207425304059 ], [ 11.711152893888517, 47.721458825411148 ], [ 11.555932725999105, 47.708511896781012 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 16, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.492684631649347, 47.703236367352893 ], [ 11.555932725999105, 47.708511896781012 ], [ 11.548084865060499, 47.555261397605541 ], [ 11.49026430204559, 47.556239021990493 ], [ 11.492684631649347, 47.703236367352893 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 17, 16 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.492684631649347, 47.703236367352893 ], [ 11.494171606887383, 47.793546964831748 ], [ 11.560135768543525, 47.790587557018483 ], [ 11.548084865060499, 47.555261397605541 ], [ 11.555932725999105, 47.708511896781012 ], [ 11.492684631649347, 47.703236367352893 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 5, "map_ids": [ 17, 12, 11, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.362468879166643, 47.430150978933419 ], [ 11.312825874742511, 47.4320860854681 ], [ 11.313408778034603, 47.511895066578489 ], [ 11.314852971617084, 47.511867076036395 ], [ 11.314941350610091, 47.511067202140225 ], [ 11.353084915373048, 47.509778987017221 ], [ 11.362468879166643, 47.430150978933419 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 12, 11, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.362468879166643, 47.430150978933419 ], [ 11.36938549667166, 47.371459738566756 ], [ 11.312390078016213, 47.372418395871961 ], [ 11.312825874742511, 47.4320860854681 ], [ 11.362468879166643, 47.430150978933419 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 12, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.314852971617084, 47.511867076036395 ], [ 11.313408778034603, 47.511895066578489 ], [ 11.313498131762904, 47.524129051376477 ], [ 11.314852971617084, 47.511867076036395 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 5, "map_ids": [ 17, 11, 6, 5, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.620694360001526, 47.505939431460874 ], [ 11.585239422399562, 47.421467283437046 ], [ 11.509213724109113, 47.424430799188599 ], [ 11.514135379576228, 47.479507313897869 ], [ 11.596703690940934, 47.479507313897869 ], [ 11.599033453215986, 47.506359250888472 ], [ 11.620694360001526, 47.505939431460874 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 11, 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.620694360001526, 47.505939431460874 ], [ 11.734060712054891, 47.503742229030728 ], [ 11.730959306321084, 47.462886605416088 ], [ 11.713699024837537, 47.365668419073984 ], [ 11.504277465779822, 47.369190868986536 ], [ 11.509213724109113, 47.424430799188599 ], [ 11.585239422399562, 47.421467283437046 ], [ 11.620694360001526, 47.505939431460874 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 11, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.599033453215986, 47.506359250888472 ], [ 11.596703690940934, 47.479507313897869 ], [ 11.514135379576228, 47.479507313897869 ], [ 11.509213724109113, 47.424430799188599 ], [ 11.362468879166643, 47.430150978933419 ], [ 11.353084915373048, 47.509778987017221 ], [ 11.314941350610091, 47.511067202140225 ], [ 11.314852971617084, 47.511867076036395 ], [ 11.599033453215986, 47.506359250888472 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 11, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.504277465779822, 47.369190868986536 ], [ 11.36938549667166, 47.371459738566756 ], [ 11.362468879166643, 47.430150978933419 ], [ 11.509213724109113, 47.424430799188599 ], [ 11.514135379576228, 47.479507313897869 ], [ 11.504277465779822, 47.369190868986536 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 11, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.730959306321084, 47.462886605416088 ], [ 11.734060712054891, 47.503742229030728 ], [ 11.738198644267296, 47.503662029972119 ], [ 11.730959306321084, 47.462886605416088 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 5, "map_ids": [ 17, 9, 6, 5, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.628567308474173, 47.524696899778306 ], [ 11.623800252212289, 47.513339286158661 ], [ 11.59971492060289, 47.514213579860268 ], [ 11.600635193862139, 47.524820292758015 ], [ 11.628567308474173, 47.524696899778306 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 9, 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.628567308474173, 47.524696899778306 ], [ 11.735615511290582, 47.524224003368502 ], [ 11.734484240176114, 47.509321475023036 ], [ 11.623800252212289, 47.513339286158661 ], [ 11.628567308474173, 47.524696899778306 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 9, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.600635193862139, 47.524820292758015 ], [ 11.59971492060289, 47.514213579860268 ], [ 11.54608252914305, 47.516160427128796 ], [ 11.546538233330054, 47.525059271626823 ], [ 11.600635193862139, 47.524820292758015 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 9, 5, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.603195517627229, 47.554329592119565 ], [ 11.640738414506332, 47.553694820516576 ], [ 11.628567308474173, 47.524696899778306 ], [ 11.600635193862139, 47.524820292758015 ], [ 11.603195517627229, 47.554329592119565 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 9, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.734484240176114, 47.509321475023036 ], [ 11.735615511290582, 47.524224003368502 ], [ 11.600635193862139, 47.524820292758015 ], [ 11.628567308474173, 47.524696899778306 ], [ 11.640738414506332, 47.553694820516576 ], [ 11.603195517627229, 47.554329592119565 ], [ 11.785324752396726, 47.551250168955235 ], [ 11.785407202908853, 47.507472979585799 ], [ 11.734484240176114, 47.509321475023036 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 9, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.548084865060499, 47.555261397605541 ], [ 11.603195517627229, 47.554329592119565 ], [ 11.600635193862139, 47.524820292758015 ], [ 11.546538233330054, 47.525059271626823 ], [ 11.548084865060499, 47.555261397605541 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 17, 6, 5, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.59971492060289, 47.514213579860268 ], [ 11.623800252212289, 47.513339286158661 ], [ 11.620694360001526, 47.505939431460874 ], [ 11.599033453215986, 47.506359250888472 ], [ 11.59971492060289, 47.514213579860268 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.59971492060289, 47.514213579860268 ], [ 11.734484240176114, 47.509321475023036 ], [ 11.734060712054891, 47.503742229030728 ], [ 11.599033453215986, 47.506359250888472 ], [ 11.620694360001526, 47.505939431460874 ], [ 11.623800252212289, 47.513339286158661 ], [ 11.59971492060289, 47.514213579860268 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.546538233330054, 47.525059271626823 ], [ 11.54608252914305, 47.516160427128796 ], [ 11.59971492060289, 47.514213579860268 ], [ 11.599033453215986, 47.506359250888472 ], [ 11.314852971617084, 47.511867076036395 ], [ 11.313498131762904, 47.524129051376477 ], [ 11.313512444412984, 47.526088686937598 ], [ 11.546538233330054, 47.525059271626823 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 17, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.599033453215986, 47.506359250888472 ], [ 11.734060712054891, 47.503742229030728 ], [ 11.314852971617084, 47.511867076036395 ], [ 11.599033453215986, 47.506359250888472 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 17, 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.713699024837537, 47.365668419073984 ], [ 11.730959306321084, 47.462886605416088 ], [ 11.723566742784671, 47.365502445033982 ], [ 11.713699024837537, 47.365668419073984 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 17, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.314697852927663, 47.688390473597259 ], [ 11.492684631649347, 47.703236367352893 ], [ 11.49026430204559, 47.556239021990493 ], [ 11.548084865060499, 47.555261397605541 ], [ 11.546538233330054, 47.525059271626823 ], [ 11.313512444412984, 47.526088686937598 ], [ 11.314697852927663, 47.688390473597259 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 17, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.409242867490216, 47.797357197064407 ], [ 11.416618939257525, 47.698557932750681 ], [ 11.314776950162008, 47.699220176855711 ], [ 11.315524425576204, 47.801561769400116 ], [ 11.409242867490216, 47.797357197064407 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 17 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.409242867490216, 47.797357197064407 ], [ 11.494171606887383, 47.793546964831748 ], [ 11.492684631649347, 47.703236367352893 ], [ 11.314697852927663, 47.688390473597259 ], [ 11.314776950162008, 47.699220176855711 ], [ 11.416618939257525, 47.698557932750681 ], [ 11.409242867490216, 47.797357197064407 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 17 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.49026430204559, 47.556239021990493 ], [ 11.785324752396726, 47.551250168955235 ], [ 11.548084865060499, 47.555261397605541 ], [ 11.49026430204559, 47.556239021990493 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 17 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.548084865060499, 47.555261397605541 ], [ 11.54608252914305, 47.516160427128796 ], [ 11.546538233330054, 47.525059271626823 ], [ 11.548084865060499, 47.555261397605541 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 17, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.734484240176114, 47.509321475023036 ], [ 11.785407202908853, 47.507472979585799 ], [ 11.785676559574554, 47.364457764057946 ], [ 11.723566742784671, 47.365502445033982 ], [ 11.730959306321084, 47.462886605416088 ], [ 11.738198644267296, 47.503662029972119 ], [ 11.734060712054891, 47.503742229030728 ], [ 11.734484240176114, 47.509321475023036 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 17 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.54608252914305, 47.516160427128796 ], [ 11.785407202908853, 47.507472979585799 ], [ 11.734484240176114, 47.509321475023036 ], [ 11.54608252914305, 47.516160427128796 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 17 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.314852971617084, 47.511867076036395 ], [ 11.314941350610091, 47.511067202140225 ], [ 11.313498131762904, 47.524129051376477 ], [ 11.314852971617084, 47.511867076036395 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 16, 9, 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.876339234935806, 47.763917387542271 ], [ 11.784922607781334, 47.764769291246047 ], [ 11.784892972684556, 47.780504078212374 ], [ 11.658934606236544, 47.786155058448514 ], [ 11.659518912039047, 47.789876433729873 ], [ 11.877356225704229, 47.784189790116294 ], [ 11.876339234935806, 47.763917387542271 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.875800865709241, 47.753185689641725 ], [ 11.784936297868962, 47.757500524283891 ], [ 11.784892972684556, 47.780504078212374 ], [ 11.784922607781334, 47.764769291246047 ], [ 11.876339234935806, 47.763917387542271 ], [ 11.875800865709241, 47.753185689641725 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.784892972684556, 47.780504078212374 ], [ 11.560135768543525, 47.790587557018483 ], [ 11.560232081054812, 47.792468316699001 ], [ 11.659518912039047, 47.789876433729873 ], [ 11.658934606236544, 47.786155058448514 ], [ 11.784892972684556, 47.780504078212374 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 16 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.494182236495579, 47.794192548055058 ], [ 11.560232081054812, 47.792468316699001 ], [ 11.560135768543525, 47.790587557018483 ], [ 11.494171606887383, 47.793546964831748 ], [ 11.494182236495579, 47.794192548055058 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 16, 9, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.785324752396726, 47.551250168955235 ], [ 11.785322524356458, 47.552433149366038 ], [ 11.823845304097135, 47.55059886726081 ], [ 11.785324752396726, 47.551250168955235 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 16, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.785322524356458, 47.552433149366038 ], [ 11.785266280979853, 47.58229563153715 ], [ 11.867186710731241, 47.581473592569779 ], [ 11.865602422354272, 47.549892842017805 ], [ 11.823845304097135, 47.55059886726081 ], [ 11.785322524356458, 47.552433149366038 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 15, 12, 11, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.179610756153556, 47.384376664305456 ], [ 11.173926154031975, 47.4280712744984 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.198131877244382, 47.384597732315108 ], [ 11.179610756153556, 47.384376664305456 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 12, 11 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.144388694503395, 47.427815088620839 ], [ 11.173926154031975, 47.4280712744984 ], [ 11.179610756153556, 47.384376664305456 ], [ 11.150623624565007, 47.384030674046308 ], [ 11.144388694503395, 47.427815088620839 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 15, 12, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.200212946611368, 47.436475787816775 ], [ 11.172693178762263, 47.437548520686498 ], [ 11.161086635546971, 47.526762043573932 ], [ 11.20382717291819, 47.526573232868621 ], [ 11.200212946611368, 47.436475787816775 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 12, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.200212946611368, 47.436475787816775 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.173926154031975, 47.4280712744984 ], [ 11.172693178762263, 47.437548520686498 ], [ 11.200212946611368, 47.436475787816775 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 15, 12, 4, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.945133362379872, 47.605614598864022 ], [ 10.906100641742665, 47.605647660477644 ], [ 10.906296592996409, 47.6197746420481 ], [ 10.925867654649176, 47.621343259215543 ], [ 10.942912507393135, 47.620781615916442 ], [ 10.945133362379872, 47.605614598864022 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 12, 4 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.945133362379872, 47.605614598864022 ], [ 10.977881057090633, 47.381968819616063 ], [ 10.902985657842867, 47.3810748685014 ], [ 10.906100641742665, 47.605647660477644 ], [ 10.945133362379872, 47.605614598864022 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 12, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.062120651962356, 47.577628103801651 ], [ 11.127206359446985, 47.580090076462966 ], [ 11.126598081806943, 47.597730826090832 ], [ 11.206806503894089, 47.600843653728958 ], [ 11.20382717291819, 47.526573232868621 ], [ 11.161086635546971, 47.526762043573932 ], [ 11.172693178762263, 47.437548520686498 ], [ 11.078544148243521, 47.441218492041052 ], [ 11.062120651962356, 47.577628103801651 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 12, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.206988991290286, 47.605392801113702 ], [ 10.945133362379872, 47.605614598864022 ], [ 10.942912507393135, 47.620781615916442 ], [ 11.207256894021981, 47.612071229523806 ], [ 11.206988991290286, 47.605392801113702 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 15, 12 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.206988991290286, 47.605392801113702 ], [ 11.206806503894089, 47.600843653728958 ], [ 11.126598081806943, 47.597730826090832 ], [ 11.127206359446985, 47.580090076462966 ], [ 11.062120651962356, 47.577628103801651 ], [ 11.078544148243521, 47.441218492041052 ], [ 11.172693178762263, 47.437548520686498 ], [ 11.173926154031975, 47.4280712744984 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.144388694503395, 47.427815088620839 ], [ 11.150623624565007, 47.384030674046308 ], [ 10.977881057090633, 47.381968819616063 ], [ 10.945133362379872, 47.605614598864022 ], [ 11.206988991290286, 47.605392801113702 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 15, 4, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.942912507393135, 47.620781615916442 ], [ 10.925867654649176, 47.621343259215543 ], [ 10.94263350273738, 47.622687039006571 ], [ 10.942912507393135, 47.620781615916442 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 15, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.207256894021981, 47.612071229523806 ], [ 10.942912507393135, 47.620781615916442 ], [ 10.94263350273738, 47.622687039006571 ], [ 11.208537673441231, 47.643999211767643 ], [ 11.207256894021981, 47.612071229523806 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 15 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.207256894021981, 47.612071229523806 ], [ 10.925867654649176, 47.621343259215543 ], [ 10.942912507393135, 47.620781615916442 ], [ 11.207256894021981, 47.612071229523806 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 14, 10, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.225192791535271, 47.682613612208613 ], [ 12.232827657126281, 47.618580177965896 ], [ 12.166526352267093, 47.616745713243176 ], [ 12.172835353902624, 47.682576817895125 ], [ 12.225192791535271, 47.682613612208613 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 14, 10 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.225192791535271, 47.682613612208613 ], [ 12.486100781966998, 47.682796965917774 ], [ 12.489500272742315, 47.625681951598203 ], [ 12.232827657126281, 47.618580177965896 ], [ 12.225192791535271, 47.682613612208613 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 14, 9, 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.215876005414803, 47.760753273514631 ], [ 12.180359206490762, 47.761084251516017 ], [ 12.186322331580927, 47.82330631683498 ], [ 12.208438664648401, 47.823130071799952 ], [ 12.215876005414803, 47.760753273514631 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 14, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.215876005414803, 47.760753273514631 ], [ 12.225192791535271, 47.682613612208613 ], [ 12.172835353902624, 47.682576817895125 ], [ 12.180359206490762, 47.761084251516017 ], [ 12.215876005414803, 47.760753273514631 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 14, 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.337418510172217, 48.014373380392236 ], [ 12.385228160629156, 47.759175095312692 ], [ 12.215876005414803, 47.760753273514631 ], [ 12.208438664648401, 47.823130071799952 ], [ 12.186322331580927, 47.82330631683498 ], [ 12.204475375499307, 48.012723756071694 ], [ 12.337418510172217, 48.014373380392236 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 14, 7 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.564798503405122, 48.017194824070117 ], [ 12.637037458797867, 48.01509148139187 ], [ 12.619439606605177, 47.754496311548628 ], [ 12.551444613451382, 47.758405116348271 ], [ 12.537540706876175, 48.016856595817949 ], [ 12.564798503405122, 48.017194824070117 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 14 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.337418510172217, 48.014373380392236 ], [ 12.537540706876175, 48.016856595817949 ], [ 12.551444613451382, 47.758405116348271 ], [ 12.619439606605177, 47.754496311548628 ], [ 12.61096779742897, 47.629042788756195 ], [ 12.489500272742315, 47.625681951598203 ], [ 12.486100781966998, 47.682796965917774 ], [ 12.225192791535271, 47.682613612208613 ], [ 12.208438664648401, 47.823130071799952 ], [ 12.215876005414803, 47.760753273514631 ], [ 12.385228160629156, 47.759175095312692 ], [ 12.337418510172217, 48.014373380392236 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 14 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.564798503405122, 48.017194824070117 ], [ 12.637240198128191, 48.018093716530643 ], [ 12.637037458797867, 48.01509148139187 ], [ 12.564798503405122, 48.017194824070117 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 13, 4 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.517950153381198, 47.340256243080674 ], [ 10.419293682606924, 47.3423219105401 ], [ 10.411714208423552, 47.48041717114377 ], [ 10.344665013724521, 47.483175383148641 ], [ 10.337668576016798, 47.646439211671023 ], [ 10.405658895198329, 47.644934303307913 ], [ 10.522543336681041, 47.637870066837046 ], [ 10.517950153381198, 47.340256243080674 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 13 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 9.990002851533681, 47.670055632936943 ], [ 10.405658895198329, 47.644934303307913 ], [ 10.337668576016798, 47.646439211671023 ], [ 10.344665013724521, 47.483175383148641 ], [ 10.411714208423552, 47.48041717114377 ], [ 10.419293682606924, 47.3423219105401 ], [ 10.517950153381198, 47.340256243080674 ], [ 10.515593379289228, 47.187549829368564 ], [ 9.984790383489822, 47.19935650619832 ], [ 9.984837592862588, 47.20361963267657 ], [ 10.126447138283325, 47.201818996743071 ], [ 10.065353275768977, 47.620491414895859 ], [ 9.989461292136648, 47.621151441464562 ], [ 9.990002851533681, 47.670055632936943 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 4, "map_ids": [ 12, 11, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.313408778034603, 47.511895066578489 ], [ 11.312825874742511, 47.4320860854681 ], [ 11.229241998810974, 47.435344222367448 ], [ 11.223198494287729, 47.513643471207217 ], [ 11.313408778034603, 47.511895066578489 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 12, 11, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.312825874742511, 47.4320860854681 ], [ 11.312390078016213, 47.372418395871961 ], [ 11.36938549667166, 47.371459738566756 ], [ 11.3804211367865, 47.27781636359186 ], [ 11.19233579384678, 47.28656585014398 ], [ 11.179610756153556, 47.384376664305456 ], [ 11.198131877244382, 47.384597732315108 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.229765977603092, 47.428555587449907 ], [ 11.229241998810974, 47.435344222367448 ], [ 11.312825874742511, 47.4320860854681 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 12, 11 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.19233579384678, 47.28656585014398 ], [ 11.164317076749017, 47.287869244574523 ], [ 11.150623624565007, 47.384030674046308 ], [ 11.179610756153556, 47.384376664305456 ], [ 11.19233579384678, 47.28656585014398 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 12, 4, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.925867654649176, 47.621343259215543 ], [ 10.906296592996409, 47.6197746420481 ], [ 10.906100641742665, 47.605647660477644 ], [ 10.720511590717665, 47.605804858679463 ], [ 10.722503851820298, 47.628044280271844 ], [ 10.925867654649176, 47.621343259215543 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 12, 4 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.977881057090633, 47.381968819616063 ], [ 10.985422100457024, 47.330468323629553 ], [ 10.803887666300479, 47.334269288436623 ], [ 10.800638952389539, 47.386823932174501 ], [ 10.712273027355351, 47.39069752761344 ], [ 10.705915766561526, 47.628590872669591 ], [ 10.722503851820298, 47.628044280271844 ], [ 10.720511590717665, 47.605804858679463 ], [ 10.906100641742665, 47.605647660477644 ], [ 10.902985657842867, 47.3810748685014 ], [ 10.977881057090633, 47.381968819616063 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 12 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.902985657842867, 47.3810748685014 ], [ 11.150623624565007, 47.384030674046308 ], [ 11.164317076749017, 47.287869244574523 ], [ 10.805724761024599, 47.304550494666032 ], [ 10.803887666300479, 47.334269288436623 ], [ 10.985422100457024, 47.330468323629553 ], [ 10.977881057090633, 47.381968819616063 ], [ 10.902985657842867, 47.3810748685014 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 12, 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.313498131762904, 47.524129051376477 ], [ 11.313408778034603, 47.511895066578489 ], [ 11.223198494287729, 47.513643471207217 ], [ 11.229241998810974, 47.435344222367448 ], [ 11.200212946611368, 47.436475787816775 ], [ 11.20382717291819, 47.526573232868621 ], [ 11.313281496633579, 47.526089707173085 ], [ 11.313498131762904, 47.524129051376477 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 12, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.223198494287729, 47.513643471207217 ], [ 11.229765977603092, 47.428555587449907 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.202701762035604, 47.498518363984758 ], [ 11.20382717291819, 47.526573232868621 ], [ 11.200212946611368, 47.436475787816775 ], [ 11.229241998810974, 47.435344222367448 ], [ 11.223198494287729, 47.513643471207217 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 12 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.198131877244382, 47.384597732315108 ], [ 11.202701762035604, 47.498518363984758 ], [ 11.199884834268854, 47.42829642071554 ], [ 11.198131877244382, 47.384597732315108 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 12, 3, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.22783547153279, 47.611393146800673 ], [ 11.227930500459175, 47.605375063172986 ], [ 11.2111148385132, 47.605389306426055 ], [ 11.211064157004351, 47.611945776768415 ], [ 11.22783547153279, 47.611393146800673 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 12, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.206806503894089, 47.600843653728958 ], [ 11.211148673772955, 47.60101217002758 ], [ 11.2111148385132, 47.605389306426055 ], [ 11.227930500459175, 47.605375063172986 ], [ 11.22783547153279, 47.611393146800673 ], [ 11.304134007260581, 47.608879041107507 ], [ 11.313281496633579, 47.526089707173085 ], [ 11.20382717291819, 47.526573232868621 ], [ 11.206806503894089, 47.600843653728958 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 12, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.211064157004351, 47.611945776768415 ], [ 11.2111148385132, 47.605389306426055 ], [ 11.206988991290286, 47.605392801113702 ], [ 11.207256894021981, 47.612071229523806 ], [ 11.211064157004351, 47.611945776768415 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 12 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.206806503894089, 47.600843653728958 ], [ 11.206988991290286, 47.605392801113702 ], [ 11.2111148385132, 47.605389306426055 ], [ 11.211148673772955, 47.60101217002758 ], [ 11.206806503894089, 47.600843653728958 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 11, 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.706401132446814, 47.324563187793593 ], [ 11.499037174069537, 47.310548608188135 ], [ 11.504277465779822, 47.369190868986536 ], [ 11.713699024837537, 47.365668419073984 ], [ 11.706401132446814, 47.324563187793593 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 11, 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.36938549667166, 47.371459738566756 ], [ 11.504277465779822, 47.369190868986536 ], [ 11.499037174069537, 47.310548608188135 ], [ 11.706401132446814, 47.324563187793593 ], [ 11.704266647137924, 47.312540742464307 ], [ 11.59316672105307, 47.30586120170868 ], [ 11.59097755994795, 47.287673730618344 ], [ 11.195716871793683, 47.260577244475172 ], [ 11.19233579384678, 47.28656585014398 ], [ 11.3804211367865, 47.27781636359186 ], [ 11.36938549667166, 47.371459738566756 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 11 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.195716871793683, 47.260577244475172 ], [ 11.168469466659717, 47.258709340689705 ], [ 11.164317076749017, 47.287869244574523 ], [ 11.19233579384678, 47.28656585014398 ], [ 11.195716871793683, 47.260577244475172 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 3, "map_ids": [ 10, 9, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.004561895148376, 47.518472490860709 ], [ 12.006714334231967, 47.518396349457532 ], [ 12.005142328954161, 47.504843848948056 ], [ 12.004561895148376, 47.518472490860709 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 10, 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.172835353902624, 47.682576817895125 ], [ 12.166526352267093, 47.616745713243176 ], [ 12.232827657126281, 47.618580177965896 ], [ 12.248077738394862, 47.490678112832285 ], [ 12.005370415704149, 47.499488349992539 ], [ 12.005142328954161, 47.504843848948056 ], [ 12.006714334231967, 47.518396349457532 ], [ 12.004561895148376, 47.518472490860709 ], [ 12.001936312142181, 47.580121433852675 ], [ 12.100008148511273, 47.5791373219365 ], [ 12.114202059897915, 47.682535613208685 ], [ 12.172835353902624, 47.682576817895125 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 10, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.003521049454676, 47.490866547756411 ], [ 11.996200488284364, 47.427754858253245 ], [ 11.945564156628507, 47.427094302601688 ], [ 11.941994575140418, 47.490533955428091 ], [ 12.003521049454676, 47.490866547756411 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 10 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.166526352267093, 47.616745713243176 ], [ 12.489500272742315, 47.625681951598203 ], [ 12.500889048131919, 47.434338567411885 ], [ 11.996200488284364, 47.427754858253245 ], [ 12.003521049454676, 47.490866547756411 ], [ 12.005737101713358, 47.490878527022062 ], [ 12.005370415704149, 47.499488349992539 ], [ 12.248077738394862, 47.490678112832285 ], [ 12.232827657126281, 47.618580177965896 ], [ 12.166526352267093, 47.616745713243176 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 9, 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.18035920649076, 47.761084251516017 ], [ 11.876339234935806, 47.763917387542271 ], [ 11.877356225704229, 47.784189790116294 ], [ 11.659518912039047, 47.789876433729873 ], [ 11.665419625921134, 47.827457389950233 ], [ 12.186322331580927, 47.82330631683498 ], [ 12.18035920649076, 47.761084251516017 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.56206602662146, 47.828281014674687 ], [ 11.665419625921134, 47.827457389950233 ], [ 11.659518912039047, 47.789876433729873 ], [ 11.560232081054812, 47.792468316699001 ], [ 11.56206602662146, 47.828281014674687 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.18035920649076, 47.761084251516017 ], [ 12.172835353902624, 47.682576817895125 ], [ 12.114202059897915, 47.682535613208685 ], [ 12.122293685450035, 47.741480623707417 ], [ 11.875800865709241, 47.753185689641725 ], [ 11.877356225704229, 47.784189790116294 ], [ 11.876339234935806, 47.763917387542271 ], [ 12.18035920649076, 47.761084251516017 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 9, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.785407202908853, 47.507472979585799 ], [ 11.785324752396726, 47.551250168955235 ], [ 11.823845304097135, 47.55059886726081 ], [ 11.911406911970992, 47.54642957596073 ], [ 11.907632360594317, 47.521901322285878 ], [ 12.004561895148376, 47.518472490860709 ], [ 12.004856561145646, 47.511553704737977 ], [ 12.005142328954161, 47.504843848948049 ], [ 12.004524685570846, 47.499519049861689 ], [ 11.785407202908853, 47.507472979585799 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.005370415704149, 47.499488349992539 ], [ 12.004524685570846, 47.499519049861689 ], [ 12.005142328954161, 47.504843848948049 ], [ 12.005370415704149, 47.499488349992539 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 9 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.785324752396726, 47.551250168955235 ], [ 11.865602422354272, 47.549892842017805 ], [ 11.867186710731241, 47.581473592569779 ], [ 12.001936312142181, 47.580121433852675 ], [ 12.004856561145646, 47.511553704737977 ], [ 12.004561895148376, 47.518472490860709 ], [ 11.907632360594317, 47.521901322285878 ], [ 11.911406911970992, 47.54642957596073 ], [ 11.823845304097135, 47.55059886726081 ], [ 11.785324752396726, 47.551250168955235 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.709025931269636, 48.1051808459559 ], [ 12.33196796509635, 48.043467292245083 ], [ 12.337418510172217, 48.014373380392236 ], [ 12.204475375499307, 48.012723756071694 ], [ 12.186322331580927, 47.82330631683498 ], [ 11.665419625921134, 47.827457389950233 ], [ 11.709025931269636, 48.1051808459559 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 8 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.186322331580927, 47.82330631683498 ], [ 12.180359206490762, 47.761084251516017 ], [ 12.18035920649076, 47.761084251516017 ], [ 12.186322331580927, 47.82330631683498 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 7 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.537479719696835, 48.01799025035195 ], [ 12.564798503405122, 48.017194824070117 ], [ 12.537540706876175, 48.016856595817949 ], [ 12.537479719696835, 48.01799025035195 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 7 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.637037458797867, 48.01509148139187 ], [ 13.089372320876526, 48.001921091328811 ], [ 13.049931371541733, 47.742331018036509 ], [ 12.850891690853322, 47.741190905138033 ], [ 12.619439606605177, 47.754496311548628 ], [ 12.637037458797867, 48.01509148139187 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 6, 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.313512444412984, 47.526088686937598 ], [ 11.313498131762904, 47.524129051376477 ], [ 11.313281496633579, 47.526089707173085 ], [ 11.313512444412984, 47.526088686937598 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 6, 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.72053148304617, 47.325518179803183 ], [ 11.706401132446814, 47.324563187793593 ], [ 11.713699024837537, 47.365668419073984 ], [ 11.723566742784671, 47.365502445033982 ], [ 11.72053148304617, 47.325518179803183 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 6 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.72053148304617, 47.325518179803183 ], [ 11.715748624933095, 47.26251234708031 ], [ 11.197598751014791, 47.246112207655038 ], [ 11.195716871793683, 47.260577244475172 ], [ 11.59097755994795, 47.287673730618344 ], [ 11.59316672105307, 47.30586120170868 ], [ 11.704266647137924, 47.312540742464307 ], [ 11.713699024837537, 47.365668419073984 ], [ 11.706401132446814, 47.324563187793593 ], [ 11.72053148304617, 47.325518179803183 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.004856561145646, 47.511553704737977 ], [ 12.005142328954161, 47.504843848948056 ], [ 12.005142328954161, 47.504843848948049 ], [ 12.004856561145646, 47.511553704737977 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 5 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.004524685570846, 47.499519049861689 ], [ 12.003521049454676, 47.490866547756411 ], [ 11.941994575140418, 47.490533955428091 ], [ 11.945564156628507, 47.427094302601688 ], [ 11.996200488284364, 47.427754858253245 ], [ 11.986426120582355, 47.343488523316964 ], [ 11.72053148304617, 47.325518179803183 ], [ 11.723566742784671, 47.365502445033982 ], [ 11.785676559574554, 47.364457764057946 ], [ 11.785407202908853, 47.507472979585799 ], [ 12.004524685570846, 47.499519049861689 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 4, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.94263350273738, 47.622687039006571 ], [ 10.925867654649176, 47.621343259215543 ], [ 10.722503851820298, 47.628044280271844 ], [ 10.723386899879145, 47.637901661937875 ], [ 10.941111328308097, 47.633082515372003 ], [ 10.94263350273738, 47.622687039006571 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 4 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.803887666300479, 47.334269288436623 ], [ 10.517950153381198, 47.340256243080674 ], [ 10.522543336681041, 47.637870066837046 ], [ 10.405658895198329, 47.644934303307913 ], [ 10.723386899879145, 47.637901661937875 ], [ 10.722503851820298, 47.628044280271844 ], [ 10.705915766561526, 47.628590872669591 ], [ 10.712273027355351, 47.39069752761344 ], [ 10.800638952389539, 47.386823932174501 ], [ 10.803887666300479, 47.334269288436623 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 3, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.284664524287056, 47.685885390863987 ], [ 11.284664524287056, 47.685685412323473 ], [ 11.282462307474757, 47.685701703754994 ], [ 11.284664524287056, 47.685885390863987 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 3, 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.226735494966313, 47.6810535251443 ], [ 11.22783547153279, 47.611393146800673 ], [ 11.211064157004351, 47.611945776768415 ], [ 11.21054039613291, 47.679702690445396 ], [ 11.226735494966313, 47.6810535251443 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 3 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.226735494966313, 47.6810535251443 ], [ 11.282462307474757, 47.685701703754994 ], [ 11.284664524287056, 47.685685412323473 ], [ 11.284664524287056, 47.685885390863987 ], [ 11.314697852927663, 47.688390473597259 ], [ 11.313512444412984, 47.526088686937598 ], [ 11.313281496633579, 47.526089707173085 ], [ 11.304134007260581, 47.608879041107507 ], [ 11.22783547153279, 47.611393146800673 ], [ 11.226735494966313, 47.6810535251443 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 2 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 11.342424163993586, 49.05842916569194 ], [ 11.927037400498497, 49.060916705077929 ], [ 11.925952774827797, 48.782610083881899 ], [ 11.346762666676366, 48.796901631703861 ], [ 11.346012225599116, 48.842138668231605 ], [ 11.369656760591264, 49.055314420803768 ], [ 11.342468540711565, 49.055754110616924 ], [ 11.342424163993586, 49.05842916569194 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 1 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.113701957067002, 49.042607876484198 ], [ 13.436446155105829, 49.024767430171707 ], [ 13.435813323344968, 48.978684607805739 ], [ 13.503526321757034, 48.97453090832721 ], [ 13.504791985278755, 48.964976085977334 ], [ 13.621233029277079, 48.961236744013178 ], [ 13.620600197516218, 48.935884924677339 ], [ 13.683883373602262, 48.93380633551002 ], [ 13.679453551276238, 48.874322047961087 ], [ 13.788933445905096, 48.872240896610307 ], [ 13.78576928710079, 48.825183787049703 ], [ 13.674390897189355, 48.827266895167398 ], [ 13.669961074863332, 48.764735980422962 ], [ 13.121295938197326, 48.767655823674225 ], [ 13.113701957067002, 49.042607876484198 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 39 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.749834794044439, 47.933136994192061 ], [ 11.293588977473462, 47.933136994192061 ], [ 11.296776282182895, 47.825824471965788 ], [ 11.348410618475688, 47.825824471965788 ], [ 11.347773157533799, 47.810414806211341 ], [ 11.408331947013002, 47.809558579566676 ], [ 11.409242867490216, 47.797357197064407 ], [ 11.315524425576204, 47.801561769400116 ], [ 11.314776950162008, 47.699220176855711 ], [ 11.284664524287056, 47.69941598780462 ], [ 11.284664524287056, 47.685885390863987 ], [ 11.282462307474757, 47.685701703754994 ], [ 11.226655578575402, 47.686114547530032 ], [ 11.226735494966313, 47.6810535251443 ], [ 11.21054039613291, 47.679702690445396 ], [ 11.211064157004351, 47.611945776768415 ], [ 11.207256894021981, 47.612071229523806 ], [ 11.208537673441231, 47.643999211767643 ], [ 10.94263350273738, 47.622687039006571 ], [ 10.941111328308097, 47.633082515372003 ], [ 10.723386899879145, 47.637901661937875 ], [ 10.749834794044439, 47.933136994192061 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 38, 32 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 7.866635559722677, 43.990101669103595 ], [ 7.854270685642075, 43.989997422034001 ], [ 7.854090467267505, 43.994510833353033 ], [ 7.866512303029718, 43.994551751372633 ], [ 7.866635559722677, 43.990101669103595 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 38 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 7.245021746341322, 43.992504536832968 ], [ 7.854090467267505, 43.994510833353033 ], [ 7.854270685642075, 43.989997422034001 ], [ 7.866635559722677, 43.990101669103595 ], [ 7.872772739040316, 43.768523820405875 ], [ 7.798216637459567, 43.767290831289834 ], [ 7.803338812377326, 43.682976369300448 ], [ 7.275185665301473, 43.672274348006674 ], [ 7.245021746341322, 43.992504536832968 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 37 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 13.487942193815121, 45.904566999610154 ], [ 13.579178582959591, 45.904995966520602 ], [ 13.597672445624008, 45.890409232012217 ], [ 13.602604142334515, 45.796361668269505 ], [ 13.719731939209165, 45.791633624601062 ], [ 13.72158132547561, 45.764977149113847 ], [ 13.75425381618275, 45.764977149113847 ], [ 13.75425381618275, 45.757235785454199 ], [ 13.789392155245144, 45.755945453749334 ], [ 13.789392155245144, 45.749493347673116 ], [ 13.825763418485169, 45.748633010504427 ], [ 13.825763418485169, 45.740889379246099 ], [ 13.863367605902814, 45.739168426429536 ], [ 13.860285295458748, 45.644434331691379 ], [ 13.891108399899442, 45.643141394117102 ], [ 13.886176703188935, 45.56723682948585 ], [ 13.695689917745424, 45.580182368773023 ], [ 13.698155766100678, 45.66985603995797 ], [ 13.672264358370496, 45.689668348074392 ], [ 13.580411507137217, 45.69354384866562 ], [ 13.579795045048403, 45.795072241595371 ], [ 13.491640966348008, 45.795502053801812 ], [ 13.487942193815121, 45.904566999610154 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 2, "map_ids": [ 36, 35 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 8.954599945310141, 46.158588754190994 ], [ 9.00740246551292, 45.780907944802216 ], [ 8.916638339012531, 45.782208602799308 ], [ 8.934170122147835, 46.158356435351337 ], [ 8.954599945310141, 46.158588754190994 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 36 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 8.954599945310141, 46.158588754190994 ], [ 9.444878587393619, 46.164163984301126 ], [ 9.408290518241682, 45.735941546009506 ], [ 9.154460788500121, 45.736473569212961 ], [ 9.156747542822115, 45.763068266787947 ], [ 9.027927049349671, 45.764131791120604 ], [ 9.027927049349671, 45.780613825692235 ], [ 9.00740246551292, 45.780907944802216 ], [ 8.954599945310141, 46.158588754190994 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 35 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 8.422312650546536, 46.205937616384908 ], [ 8.949326668381687, 46.196306944361112 ], [ 8.954599945310141, 46.158588754190994 ], [ 8.934170122147835, 46.158356435351337 ], [ 8.916638339012531, 45.782208602799308 ], [ 9.00740246551292, 45.780907944802216 ], [ 9.011942195253189, 45.748436600704871 ], [ 8.461447354841226, 45.728406710177616 ], [ 8.422312650546536, 46.205937616384908 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 34 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 10.364283637679318, 46.563233399634434 ], [ 10.404023762349855, 46.564258019941725 ], [ 10.401043252999562, 46.610004657581463 ], [ 10.673759858551133, 46.620241152991255 ], [ 10.696113678678309, 46.347634339477793 ], [ 10.437802868319812, 46.340775944881472 ], [ 10.434822358969523, 46.379857269057872 ], [ 10.378192681314006, 46.379171872698699 ], [ 10.364283637679318, 46.563233399634434 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 33 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 6.918719763904529, 45.760840627640583 ], [ 7.574283333934264, 45.77457491350043 ], [ 7.564074335068395, 45.678363895825676 ], [ 7.621682257240083, 45.678873384894729 ], [ 7.586679975414247, 45.402050116700728 ], [ 7.050707534956123, 45.375932010925013 ], [ 7.039040107680844, 45.460388126261854 ], [ 6.967577115619759, 45.456296198161759 ], [ 6.918719763904529, 45.760840627640583 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 32 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 7.840265385698349, 44.340747890420985 ], [ 8.500341261306973, 44.340747890420985 ], [ 8.500341261306973, 44.076677556040742 ], [ 8.320708066376582, 44.076240096132508 ], [ 8.321925918545601, 43.993940178530494 ], [ 7.866635559722677, 43.990101669103595 ], [ 7.866512303029718, 43.994551751372633 ], [ 7.854090467267505, 43.994510833353033 ], [ 7.840265385698349, 44.340747890420985 ] ] ] } },
{ "type": "Feature", "properties": { "n_maps": 1, "map_ids": [ 31 ] }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 12.981452026443142, 47.232295835973069 ], [ 13.215260956782915, 47.23682309659263 ], [ 13.225929044859255, 47.016653826482646 ], [ 12.991231107179784, 46.99604202353337 ], [ 12.981452026443142, 47.232295835973069 ] ] ] } }
]
}

/////////////////////////////////////////////////
// functions to display the raster overlays on the web map
/////////////////////////////////////////////////


function intToGeotiffURL(i){
  return "/assets/post_assets/mapmap/map_" + String(i).padStart(2,'0') + ".tif"
}

function intToMapCoverURL(i){
  return "/assets/post_assets/mapmap/map_" + String(i).padStart(2,'0') + "_full.jpg"
}

async function urlToGeorasterlayer(url){
  let response = await fetch(url);
  let arrayBuffer = await response.arrayBuffer();
  let georaster = await parseGeoraster(arrayBuffer);
  let layer = new GeoRasterLayer({
          georaster: georaster,
          resolution: 256,
          opacity: 1,
          pixelValuesToColorFn: pixelValuesToColorFunction,
          pane: "rasterOverlays"
      });
  layer.addTo(map);
  return layer;
}

function pixelValuesToColorFunction(values){
  // all zero means nodata 
  if(values[0] == 0 && values[1] == 0 && values[2] == 0){
    return null
  }
  return `rgb(${values[0]},${values[1]},${values[2]})`
}


/////////////////////////////////////////////////
// Create the grid showing all the 40 hiking map covers
// and make it so that a clicked cover enlargens in a popup
/////////////////////////////////////////////////

function createPaperMapGridCellHTML(i){
  let newMapElement = '<div id='+ i +'>'
  newMapElement += '<img src="' + intToMapCoverURL(i) + '"'
  newMapElement += 'style="cursor: pointer;"'
  newMapElement += ' onClick="showMapCoverPopup(' + String(i) + ')"/> '
  newMapElement += '</div>';
  return newMapElement
}

function createOverviewGrid(){
  let allMapElements = "";
  let newMapElement;
  for (let i = 0; i < 40; i++) {
    newMapElement = createPaperMapGridCellHTML(i)
    allMapElements += newMapElement
  }
  document.getElementById("all-maps-wrapper").innerHTML = allMapElements;
}

const  buttonStyle = "'border:1px solid black; padding:0 3px; border-radius:3px;'"

function showMapCoverPopup(mapId){
  let oldDiv = document.getElementById("mapCoverPopup");
  if (oldDiv){oldDiv.remove()};

  var width = document.getElementById('all-maps-wrapper').offsetWidth;
  var height = document.getElementById('all-maps-wrapper').offsetHeight;

  let popup = document.createElement('div');
  popup.setAttribute("id", "mapCoverPopup");
  popup.style.setProperty("background", "rgba(255,255,255,0.8)");
  popup.style.setProperty("position", "absolute");
  popup.style.setProperty("top", 10 + "px");
  popup.style.setProperty("left", width/4-10 + "px");
  popup.style.setProperty("width", width/2+20 + "px");
  popup.style.setProperty("padding", width/32 + "px");
  popup.style.setProperty("border-radius", "5px");

  let header = document.createElement("span");
  header.innerHTML = "<button style=" + buttonStyle.slice(0, -1) + " float:right;'>Close popup</button>";
  header.setAttribute("onclick", "removeMapCoverPopup()");
  popup.appendChild(header);

  let extentButton = document.createElement("span");
  extentButton.innerHTML = "<button style=" + buttonStyle + ">Show covered area</button>";
  extentButton.setAttribute("onclick", "setActiveMapAndZoomToExtent(" + String(mapId) + ")");
  popup.appendChild(extentButton);

  let coverImg = document.createElement("img");
  coverImg.setAttribute("src", intToMapCoverURL(mapId));
  popup.appendChild(coverImg);

  document.getElementById("all-maps-wrapper").appendChild(popup);
  popup.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function removeMapCoverPopup(){
  document.getElementById("mapCoverPopup").remove();
}

createOverviewGrid();

/////////////////////////////////////////////////
// Create the leaflet web map
/////////////////////////////////////////////////

var map = L.map('map').setView([0, 0], 5);

L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

map.createPane('rasterOverlays');
map.getPane('rasterOverlays').style.zIndex = 650;

// left legend explains the heatmap
var legend = L.control({position: 'topleft'});
legend.onAdd = function (map) {
  var div = L.DomUtil.create('div', 'info legend');
  labels = ['<strong>Coverage:</strong>'];
  for (var i = 1; i < 6; i++) {
    div.innerHTML += 
    labels.push(
        '<i class="circle"  style="color:' + getHeatMapColor(i) + '">&#9632;</i> ' + i + mapOrMaps(i)
        );
  };
  div.style.setProperty("background-color", "white");
  div.style.setProperty("opacity", "0.9");
  div.style.setProperty("font-size", "18px");
  div.innerHTML = labels.join('<br>');
  return div;
};
legend.addTo(map);

const heatMapExplained = "Click on a yellow/red <br> polygon to show the <br> maps covering it"

// right legend shows the paper maps that are available to be overlaid
var legend2 = L.control({position: 'topright'});
legend2.onAdd = function (map) {
  var div = L.DomUtil.create('div', 'info covered_maps');
  div.innerHTML = "<div id='mapInPolyLegend'>" + heatMapExplained + "</div>";
  div.style.setProperty("background-color", "white");
  div.style.setProperty("opacity", "0.9");
  div.style.setProperty("font-size", "18px");
  return div;
};
legend2.addTo(map);

/////////////////////////////////////////////////
// Add the polygon heatmap and make it display hiking map overlays on click
/////////////////////////////////////////////////

//  the polygon that is currently clicked
let activeHeatMapLayer = null;
// the paper map image that is currently overlayed onto the web map
let activeRaster = null;
let activeRasterId = null;

function getHeatMapColor(n_maps){
    switch (n_maps) {
        case 1:   return "#fff33b";
        case 2:   return "#fdc70c";
        case 3:   return "#f3903f";
        case 4:   return "#ed683c";
        case 5:   return "#e93e3a";
    }
}

function getHeatMapPolyStyle(feature, layer){
  return {color: "blue", opacity: 0, fillColor: getHeatMapColor(feature.properties.n_maps), fillOpacity: 0.7}; 
}

function onEachHeatMapPoly(feature, layer){
  layer.on({
        click: function (e){
          map.flyToBounds(layer.getBounds(), {"duration": 1, "maxZoom": 10})
          if (activeHeatMapLayer){activeHeatMapLayer.setStyle({opacity: 0});}
          if (activeRaster){
            map.removeLayer(activeRaster);
            activeRaster = null;
            activeRasterId = null;
          }
          layer.setStyle({opacity: 1});
          activeHeatMapLayer = layer;
          // show the maps that are covered by this poly in the second legend
          updateMapInPolyLegend(feature.properties.map_ids)
          }
    });
}
          
async function displayRaster(mapId){
  if (activeRaster){
    map.removeLayer(activeRaster);
  }
  let urlToGeotiffFile = intToGeotiffURL(mapId);
  let raster = await urlToGeorasterlayer(urlToGeotiffFile);
  activeRaster = raster;
  activeRasterId = mapId;
}

async function toggleRasterDisplay(mapId){
  if(mapId == activeRasterId){
    map.removeLayer(activeRaster);
    activeRaster = null;
    activeRasterId = null;
    document.getElementById(mapId +"displayButton").innerHTML = "display overlay"
  }else{
    document.getElementById(mapId +"displayButton").innerHTML = "loading..."
    if (activeRasterId){
        // reset button of previously active map
        document.getElementById(activeRasterId +"displayButton").innerHTML = "display overlay"
    }
    await displayRaster(mapId)
    document.getElementById(mapId +"displayButton").innerHTML = "hide overlay"
  }
}

function closeMapInPolyLegend(){
  if (activeHeatMapLayer){activeHeatMapLayer.setStyle({opacity: 0});}
  if (activeRaster){
    map.removeLayer(activeRaster);
    activeRaster = null;
    activeRasterId = null;
  }
  document.getElementById("mapInPolyLegend").innerHTML = heatMapExplained;
}

function updateMapInPolyLegend(visibleMapIds){
  let html = "<button style=" + buttonStyle.slice(0, -1) + " float:right;' onclick='closeMapInPolyLegend()'>X</button><br>"
  html += "<span>Covered by:</span>";
  visibleMapIds.forEach(function (mapId) {
    html += "<div>Map " + String(mapId) + ": ";
    html += "<button id='"+ mapId +"displayButton' style=" + buttonStyle + " onclick='toggleRasterDisplay(" + mapId + ")'>display overlay</button>"
    html += " or "
    html += "<button style=" + buttonStyle + " onclick='showMapCoverPopup(" + mapId + ")'>show cover</button>"
    html += "</div>"
  });
  document.getElementById("mapInPolyLegend").innerHTML = html;
}

let polyHeatMap = L.geoJSON(polyHeatMapJSON, {
    style: getHeatMapPolyStyle,
    onEachFeature: onEachHeatMapPoly
}).addTo(map);

map.fitBounds(polyHeatMap.getBounds(), maxZoom=15);

function mapOrMaps(i){
  if (i==1) return " map"
  return " maps"
}

async function setActiveMapAndZoomToExtent(newActiveMapId){
  updateMapInPolyLegend([newActiveMapId])
  displayRaster(newActiveMapId).then( res => {
    map.flyToBounds(activeRaster.getBounds(), {"duration": 1})
  })
  document.getElementById(newActiveMapId + "displayButton").innerHTML = "hide overlay"
  document.getElementById("map").scrollIntoView({ behavior: 'smooth', block: 'center' });
}

</script>
{% endraw %}
